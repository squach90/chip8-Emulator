program = [
    0x00, 0xE0,       # CLS
    0x60, 0x00,       # LD V0, 0
    0x61, 0x00,       # LD V1, 0
    0xA3, 0x00,       # LD I, 0x300 (adresse du sprite)
    0xD0, 0x15,       # DRW V0,V1,5
    0x12, 0x00        # JP 0x200 (boucle)
]

# 0x200 = 512, program length = 6 instructions = 12 bytes
# 0x300 = 768
padding = [0] * (0x300 - (0x200 + len(program)))
sprites = [
    0xF0, 0x90, 0x90, 0x90, 0xF0,  # 0
    0x20, 0x60, 0x20, 0x20, 0x70,  # 1
    0xF0, 0x10, 0xF0, 0x80, 0xF0,  # 2
    0xF0, 0x10, 0xF0, 0x10, 0xF0,  # 3
    0x90, 0x90, 0xF0, 0x10, 0x10,  # 4
    0xF0, 0x80, 0xF0, 0x10, 0xF0,  # 5
    0xF0, 0x80, 0xF0, 0x90, 0xF0,  # 6
    0xF0, 0x10, 0x20, 0x40, 0x40,  # 7
    0xF0, 0x90, 0xF0, 0x90, 0xF0,  # 8
    0xF0, 0x90, 0xF0, 0x10, 0xF0,  # 9
    0xF0, 0x90, 0xF0, 0x90, 0x90,  # A
    0xE0, 0x90, 0xE0, 0x90, 0xE0,  # B
    0xF0, 0x80, 0x80, 0x80, 0xF0,  # C
    0xE0, 0x90, 0x90, 0x90, 0xE0,  # D
    0xF0, 0x80, 0xF0, 0x80, 0xF0,  # E
    0xF0, 0x80, 0xF0, 0x80, 0x80   # F
]


# --- Génération du fichier ROM ---
filename = "test_keys.ch8"
with open(filename, "wb") as f:
    f.write(bytes(program + padding + sprites))

print(f"✅ ROM générée : {filename}")
